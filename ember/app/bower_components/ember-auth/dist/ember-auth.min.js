// Generated by EmberScript 0.0.7
var get$=Ember.get,set$=Ember.set;set$(Em,"Auth",get$(Em,"Object").extend(get$(Em,"Evented"),{init:function(){return null!=get$(this,"_request")||set$(this,"_request",get$(get$(Em,"Auth"),"Request").create({auth:this})),null!=get$(this,"_response")||set$(this,"_response",get$(get$(Em,"Auth"),"Response").create({auth:this})),null!=get$(this,"_strategy")||set$(this,"_strategy",get$(get$(Em,"Auth"),"Strategy").create({auth:this})),null!=get$(this,"_session")||set$(this,"_session",get$(get$(Em,"Auth"),"Session").create({auth:this})),null!=get$(this,"_module")||set$(this,"_module",get$(get$(Em,"Auth"),"Module").create({auth:this}))},trigger:function(){return get$(this,"syncEvent").apply(this,arguments),this._super.apply(this,arguments)},syncEvent:function(){return get$(get$(this,"_request"),"syncEvent").apply(get$(this,"_request"),arguments),get$(get$(this,"_response"),"syncEvent").apply(get$(this,"_response"),arguments),get$(get$(this,"_strategy"),"syncEvent").apply(get$(this,"_strategy"),arguments),get$(get$(this,"_session"),"syncEvent").apply(get$(this,"_session"),arguments),get$(get$(this,"_module"),"syncEvent").apply(get$(this,"_module"),arguments)},ensurePromise:function(e){var t,n;return null!=(null!=(t=n=e())?get$(t,"then"):void 0)?n:new(get$(get$(Em,"RSVP"),"Promise"))(function(e){return e()})},followPromise:function(e,t){return null!=(null!=e?get$(e,"then"):void 0)?e.then(function(){return t()}):this.ensurePromise(function(){return t()})},wrapPromise:function(e){var t,n,r;return r=null,n=null,t=new(get$(get$(Em,"RSVP"),"Promise"))(function(e,t){return r=e,n=t}),e(r,n),t},requestAdapter:"jquery",responseAdapter:"json",strategyAdapter:"token",sessionAdapter:"cookie",modules:["emberData"],signInEndPoint:null,signOutEndPoint:null,baseUrl:null,userModel:null,tokenKey:null,tokenIdKey:null,tokenLocation:"param",tokenHeaderKey:null,actionRedirectable:{signInRoute:!1,signOutRoute:!1,signInSmart:!1,signOutSmart:!1,signInBlacklist:[],signOutBlacklist:[]},authRedirectable:{route:null},rememberable:{tokenKey:null,period:14,autoRecall:!0,endPoint:null},timeoutable:{period:20,callback:null},urlAuthenticatable:{paramsKey:null,endPoint:null}}));var get$=Ember.get,set$=Ember.set;set$(get$(Em,"Auth"),"Request",Ember.Object.extend({init:function(){var e;if(null==get$(this,"adapter")){e=get$(Em,"String").capitalize(get$(Em,"String").camelize(get$(get$(this,"auth"),"requestAdapter")));if(null==get$(get$(Em,"Auth"),"Request")[e])throw"Adapter not found: Em.Auth.Request."+e;set$(this,"adapter",get$(get$(Em,"Auth"),"Request")[e].create({auth:get$(this,"auth")}))}return this.inject()},syncEvent:function(){if(null!=get$(get$(this,"adapter"),"syncEvent"))return get$(get$(this,"adapter"),"syncEvent").apply(get$(this,"adapter"),arguments)},signIn:function(e,t){var n;return typeof t=="undefined"&&(t=e,e=this.resolveUrl(get$(get$(this,"auth"),"signInEndPoint"))),get$(this,"auth").ensurePromise((n=this,function(){return get$(n,"adapter").signIn(e,get$(get$(n,"auth"),"_strategy").serialize(t))}))},signOut:function(e,t){var n;return typeof t=="undefined"&&(t=e,e=this.resolveUrl(get$(get$(this,"auth"),"signOutEndPoint"))),get$(this,"auth").ensurePromise((n=this,function(){return get$(n,"adapter").signOut(e,get$(get$(n,"auth"),"_strategy").serialize(t))}))},send:function(e){var t;return get$(this,"auth").ensurePromise((t=this,function(){return get$(t,"adapter").send(get$(get$(t,"auth"),"_strategy").serialize(e))}))},resolveUrl:function(e){var t;return t=get$(get$(this,"auth"),"baseUrl"),t&&t[get$(t,"length")-1]==="/"&&(t=t.substr(0,get$(t,"length")-1)),(null!=e?e[0]:void 0)==="/"&&(e=e.substr(1,get$(e,"length"))),[t,e].join("/")},inject:function(){var e,t,n;return get$(this,"auth").reopen({signIn:(e=this,function(t){return e.signIn(t)}),signOut:(t=this,function(e){return t.signOut(e)}),send:(n=this,function(e){return n.send(e)})})}}));var get$=Ember.get,set$=Ember.set;set$(get$(get$(Em,"Auth"),"Request"),"Dummy",Ember.Object.extend({signIn:function(e,t){null==t&&(t={}),this.send(t);switch(get$(t,"status")){case"success":get$(this,"auth").trigger("signInSuccess");break;case"error":get$(this,"auth").trigger("signInError")}return get$(this,"auth").trigger("signInComplete")},signOut:function(e,t){null==t&&(t={}),this.send(t);switch(get$(t,"status")){case"success":get$(this,"auth").trigger("signOutSuccess");break;case"error":get$(this,"auth").trigger("signOutError")}return get$(this,"auth").trigger("signOutComplete")},send:function(e){return null==e&&(e={}),get$(get$(this,"auth"),"_response").canonicalize(e)}})),void function(){var e,t=Ember.get,n=Ember.set;e=jQuery,n(t(t(Em,"Auth"),"Request"),"Jquery",Ember.Object.extend({init:function(){return null!=t(this,"jqxhr")||n(this,"jqxhr",null),this.inject()},signIn:function(n,r){var i,s,o;return null==r&&(r={}),this.send(e.extend(!0,{url:n,type:"POST"},r)).done((i=this,function(){return t(i,"auth").trigger("signInSuccess")})).fail((s=this,function(){return t(s,"auth").trigger("signInError")})).always((o=this,function(){return t(o,"auth").trigger("signInComplete")}))},signOut:function(n,r){var i,s,o;return null==r&&(r={}),this.send(e.extend(!0,{url:n,type:"DELETE"},r)).done((i=this,function(){return t(i,"auth").trigger("signOutSuccess")})).fail((s=this,function(){return t(s,"auth").trigger("signOutError")})).always((o=this,function(){return t(o,"auth").trigger("signOutComplete")}))},send:function(r){var i,s,o,u;return null==r&&(r={}),i={},n(i,"dataType","json"),t(r,"data")&&null==t(r,"contentType")&&(null!=t(r,"type")&&t(r,"type").toUpperCase()!=="GET"&&n(r,"data",JSON.stringify(t(r,"data"))),(null!=t(r,"type")?t(r,"type").toUpperCase():void 0)!=="GET"&&n(i,"contentType","application/json; charset=utf-8")),r=e.extend(i,r),e.ajax(r).done((s=this,function(e,r,i){return t(t(s,"auth"),"_response").canonicalize(e),n(s,"jqxhr",i)})).fail((o=this,function(e){return t(t(o,"auth"),"_response").canonicalize(t(e,"responseText")),n(o,"jqxhr",e)})).always((u=this,function(e){return n(u,"jqxhr",e)}))},inject:function(){var e;return t(this,"auth").reopen({jqxhr:Em.computed((e=this,function(){return t(e,"jqxhr")})).property("_request.adapter.jqxhr")})}}))}.call(this);var get$=Ember.get,set$=Ember.set;set$(get$(Em,"Auth"),"Response",Ember.Object.extend({init:function(){var e;null!=get$(this,"response")||set$(this,"response",{});if(null==get$(this,"adapter")){e=get$(Em,"String").capitalize(get$(Em,"String").camelize(get$(get$(this,"auth"),"responseAdapter")));if(null==get$(get$(Em,"Auth"),"Response")[e])throw"Adapter not found: Em.Auth.Response."+e;set$(this,"adapter",get$(get$(Em,"Auth"),"Response")[e].create({auth:get$(this,"auth")}))}return this.inject()},syncEvent:function(){if(null!=get$(get$(this,"adapter"),"syncEvent"))return get$(get$(this,"adapter"),"syncEvent").apply(get$(this,"adapter"),arguments)},canonicalize:function(e){return set$(this,"response",get$(this,"adapter").canonicalize(e))},inject:function(){var e;return get$(this,"auth").reopen({response:Em.computed((e=this,function(){return get$(e,"response")})).property("_response.response")})}}));var get$=Ember.get,set$=Ember.set;set$(get$(get$(Em,"Auth"),"Response"),"Dummy",Ember.Object.extend({canonicalize:function(e){return e}}));var get$=Ember.get,set$=Ember.set;set$(get$(get$(Em,"Auth"),"Response"),"Json",Ember.Object.extend({canonicalize:function(e){var t;if(!e)return{};switch(typeof e){case"object":return e;case"string":try{return JSON.parse(e)}catch(n){throw t=n,"Invalid JSON format"};default:throw"Invalid JSON format"}}}));var get$=Ember.get,set$=Ember.set;set$(get$(Em,"Auth"),"Strategy",Ember.Object.extend({init:function(){var e;if(null==get$(this,"adapter")){e=get$(Em,"String").capitalize(get$(Em,"String").camelize(get$(get$(this,"auth"),"strategyAdapter")));if(null!=get$(get$(Em,"Auth"),"Strategy")[e])return set$(this,"adapter",get$(get$(Em,"Auth"),"Strategy")[e].create({auth:get$(this,"auth")}));throw"Adapter not found: Em.Auth.Strategy."+e}},syncEvent:function(e,t){t=2<=arguments.length?[].slice.call(arguments,1):[];switch(e){case"signInSuccess":this.deserialize()}if(null!=get$(get$(this,"adapter"),"syncEvent"))return get$(get$(this,"adapter"),"syncEvent").apply(get$(this,"adapter"),arguments)},serialize:function(e){return get$(this,"adapter").serialize(e)},deserialize:function(){return get$(this,"adapter").deserialize(get$(get$(this,"auth"),"response"))}}));var get$=Ember.get,set$=Ember.set;set$(get$(get$(Em,"Auth"),"Strategy"),"Dummy",Ember.Object.extend({serialize:function(e){return null==e&&(e={}),e},deserialize:function(e){return null==e&&(e={}),function(t){var n,r;for(n in e)r=e[n],t.push(get$(this,"auth").set(n,r));return t}.call(this,[])}}));var get$=Ember.get,set$=Ember.set;set$(get$(get$(Em,"Auth"),"Strategy"),"Token",Ember.Object.extend({init:function(){return null!=get$(this,"authToken")||set$(this,"authToken",null),this.inject()},serialize:function(e){null==e&&(e={});if(!get$(get$(this,"auth"),"signedIn"))return e;switch(get$(get$(this,"auth"),"tokenLocation")){case"param":e.data||(e.data={}),"undefined"!=typeof FormData&&null!=FormData&&get$(e,"data")instanceof FormData?get$(e,"data").append(get$(get$(this,"auth"),"tokenKey"),get$(this,"authToken")):get$(e,"data")[get$(get$(this,"auth"),"tokenKey")]||(get$(e,"data")[get$(get$(this,"auth"),"tokenKey")]=get$(this,"authToken"));break;case"authHeader":e.headers||(e.headers={}),get$(e,"headers").Authorization||(get$(e,"headers").Authorization=""+get$(get$(this,"auth"),"tokenHeaderKey")+" "+get$(this,"authToken"));break;case"customHeader":e.headers||(e.headers={}),get$(e,"headers")[get$(get$(this,"auth"),"tokenHeaderKey")]||(get$(e,"headers")[get$(get$(this,"auth"),"tokenHeaderKey")]=get$(this,"authToken"))}return e},deserialize:function(e){null==e&&(e={}),set$(this,"authToken",e[get$(get$(this,"auth"),"tokenKey")]);if(get$(get$(this,"auth"),"tokenIdKey"))return set$(get$(get$(this,"auth"),"_session"),"userId",e[get$(get$(this,"auth"),"tokenIdKey")])},inject:function(){var e;return get$(this,"auth").reopen({authToken:Em.computed((e=this,function(){return get$(e,"authToken")})).property("_strategy.adapter.authToken")})}}));var get$=Ember.get,set$=Ember.set;set$(get$(Em,"Auth"),"Session",Ember.Object.extend({init:function(){var e,t,n;null!=get$(this,"signedIn")||set$(this,"signedIn",!1),null!=get$(this,"userId")||set$(this,"userId",null),null!=get$(this,"user")||set$(this,"user",null);if(null==get$(this,"adapter")){e=get$(Em,"String").capitalize(get$(Em,"String").camelize(get$(get$(this,"auth"),"sessionAdapter")));if(null==get$(get$(Em,"Auth"),"Session")[e])throw"Adapter not found: Em.Auth.Session."+e;set$(this,"adapter",get$(get$(Em,"Auth"),"Session")[e].create({auth:get$(this,"auth")}))}return get$(this,"auth").on("signInSuccess",(t=this,function(){return t.start()})),get$(this,"auth").on("signOutSuccess",(n=this,function(){return n.clear()})),this.inject()},syncEvent:function(e,t){t=2<=arguments.length?[].slice.call(arguments,1):[];if(null!=get$(get$(this,"adapter"),"syncEvent"))return get$(get$(this,"adapter"),"syncEvent").apply(get$(this,"adapter"),arguments)},findUser:function(){var e,t,n,r;if(get$(this,"userId")&&(n=get$(get$(this,"auth"),"userModel"))&&(t=Ember.get(n))&&null!=(null!=(e=set$(this,"user",t.find(get$(this,"userId"))))?get$(e,"then"):void 0))return t.find(get$(this,"userId")).then((r=this,function(e){return set$(r,"user",e)}))},start:function(){return set$(this,"signedIn",!0),set$(this,"startTime",new Date),set$(this,"endTime",null),this.findUser()},clear:function(){return set$(this,"signedIn",!1),set$(this,"userId",null),set$(this,"user",null),set$(this,"startTime",null),set$(this,"endTime",new Date)},retrieve:function(e,t){return get$(this,"adapter").retrieve(e,t)},store:function(e,t,n){return get$(this,"adapter").store(e,t,n)},remove:function(e,t){return get$(this,"adapter").remove(e,t)},create:function(e){return get$(get$(this,"auth"),"_response").canonicalize(e),get$(this,"auth").trigger("signInSuccess")},destroy:function(){return get$(get$(this,"auth"),"_response").canonicalize(""),get$(this,"auth").trigger("signOutSuccess")},inject:function(){var e,t,n,r,i,s,o;return get$(this,"auth").reopen({signedIn:Em.computed((e=this,function(){return get$(e,"signedIn")})).property("_session.signedIn"),userId:Em.computed((t=this,function(){return get$(t,"userId")})).property("_session.userId"),user:Em.computed((n=this,function(){return get$(n,"user")})).property("_session.user"),startTime:Em.computed((r=this,function(){return get$(r,"startTime")})).property("_session.startTime"),endTime:Em.computed((i=this,function(){return get$(i,"endTime")})).property("_session.endTime"),createSession:(s=this,function(e){return s.create(e)}),destroySession:(o=this,function(){return o.destroy()})})}})),function(e){typeof define=="function"&&define.amd&&define.amd.jQuery?define(["jquery"],e):e(jQuery)}(function(e){function n(e){return e}function r(e){return decodeURIComponent(e.replace(t," "))}function i(e){e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s.json?JSON.parse(e):e}catch(t){}}var t=/\+/g,s=e.cookie=function(t,o,u){if(o!==undefined){u=e.extend({},s.defaults,u);if(typeof u.expires=="number"){var a=u.expires,f=u.expires=new Date;f.setDate(f.getDate()+a)}return o=s.json?JSON.stringify(o):String(o),document.cookie=[encodeURIComponent(t),"=",s.raw?o:encodeURIComponent(o),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}var l=s.raw?n:r,c=document.cookie.split("; "),h=t?undefined:{};for(var p=0,d=c.length;p<d;p++){var v=c[p].split("="),m=l(v.shift()),g=l(v.join("="));if(t&&t===m){h=i(g);break}t||(h[m]=i(g))}return h};s.defaults={},e.removeCookie=function(t,n){return e.cookie(t)!==undefined?(e.cookie(t,"",e.extend(n,{expires:-1})),!0):!1}}),void function(){var e,t=Ember.get,n=Ember.set;e=jQuery,n(t(t(Em,"Auth"),"Session"),"Cookie",Ember.Object.extend({retrieve:function(t,n){return e.cookie(t)},store:function(t,n,r){return e.cookie(t,n,e.extend(!0,{path:"/"},r))},remove:function(t,n){return e.removeCookie(t,e.extend(!0,{path:"/"},n))}}))}.call(this);var get$=Ember.get,set$=Ember.set;set$(get$(get$(Em,"Auth"),"Session"),"Dummy",Ember.Object.extend({init:function(){return set$(this,"session",{})},retrieve:function(e){return this.get("session."+e)},store:function(e,t){return this.set("session."+e,t)},remove:function(e){return delete get$(this,"session")[e]}}));var get$=Ember.get,set$=Ember.set;set$(get$(get$(Em,"Auth"),"Session"),"LocalStorage",Ember.Object.extend({retrieve:function(e){return localStorage.getItem(e)},store:function(e,t){return localStorage.setItem(e,t)},remove:function(e){return localStorage.removeItem(e)}}));var get$=Ember.get,set$=Ember.set;set$(get$(Em,"Auth"),"Module",Ember.Object.extend({init:function(){var e,t;if(null==get$(this,"module")){set$(this,"module",{});for(var n=0,r=get$(get$(this,"auth"),"modules").length;n<r;++n){e=get$(get$(this,"auth"),"modules")[n],e=get$(Em,"String").camelize(e),t=get$(Em,"String").capitalize(get$(Em,"String").camelize(e));if(null==get$(get$(Em,"Auth"),"Module")[t])throw"Module not found: Em.Auth.Module."+t;this.set("module."+e,get$(get$(Em,"Auth"),"Module")[t].create({auth:get$(this,"auth")}))}}return this.inject()},syncEvent:function(){var e;return e=arguments,function(t){var n,r;for(n in get$(this,"module"))r=get$(this,"module")[n],t.push(null!=get$(r,"syncEvent")?get$(r,"syncEvent").apply(r,e):void 0);return t}.call(this,[])},inject:function(){var e;return get$(this,"auth").reopen({module:Em.computed((e=this,function(){return get$(e,"module")})).property("_module.module")})}})),void function(){var e,t=Ember.get,n=Ember.set;e=jQuery,n(t(t(Em,"Auth"),"Module"),"ActionRedirectable",Ember.Object.extend({init:function(){return null!=t(this,"config")||n(this,"config",t(t(this,"auth"),"actionRedirectable")),null!=t(this,"signInRedir")||n(this,"signInRedir",null),null!=t(this,"signOutRedir")||n(this,"signOutRedir",null),null!=t(this,"router")||n(this,"router",null),this.patch()},canonicalizeRoute:function(e){var n;return typeof e!="string"?"":(n=function(e,n){var r;return r=t(e,"length")-t(n,"length"),r>=0&&e.lastIndexOf(n)===r},n(e,".index")?e.substr(0,e.lastIndexOf(".index")):e)},getBlacklist:function(e){var n;return(n=t(this,"config")[""+e+"Blacklist"])?function(e){var t;for(var r=0,i=n.length;r<i;++r)t=n[r],e.push(this.canonicalizeRoute(t));return e}.call(this,[]):[]},resolveRedirect:function(e){var n,r;return e!=="signIn"&&e!=="signOut"?null:(r=t(this,"config")[""+e+"Smart"],n=this.canonicalizeRoute(t(this,"config")[""+e+"Route"]),n?r?this.get(""+e+"Redir")||n:n:null)},registerRedirect:function(r){var i;i=this.canonicalizeRoute(t(r,"targetName")),e.inArray(i,this.getBlacklist("signIn"))===-1&&n(this,"signInRedir",r);if(e.inArray(i,this.getBlacklist("signOut"))===-1)return n(this,"signOutRedir",r)},redirect:Ember.observer(function(){var e,n;e=t(t(this,"auth"),"signedIn")?"signIn":"signOut";if(!(n=this.resolveRedirect(e)))return;switch(typeof n){case"object":return n.retry();case"string":return t(this,"router").transitionTo(n)}},"auth.signedIn"),patch:function(){var e;return e=this,t(Em,"Route").reopen({init:function(){return e.router||(e.router=t(this,"router")),this._super.apply(this,arguments)},beforeModel:function(n){return t(e,"auth").followPromise(this._super.apply(this,arguments),function(){return e.registerRedirect(n),null})}})}}))}.call(this);var get$=Ember.get,set$=Ember.set;set$(get$(get$(Em,"Auth"),"Module"),"AuthRedirectable",Ember.Object.extend({init:function(){return null!=get$(this,"config")||set$(this,"config",get$(get$(this,"auth"),"authRedirectable")),this.patch()},patch:function(){var e;return e=this,set$(this,"AuthRedirectable",Ember.Mixin.create({beforeModel:function(){var t;return get$(e,"auth").followPromise(this._super.apply(this,arguments),(t=this,function(){if(get$(get$(e,"auth"),"signedIn"))return;return get$(e,"auth").trigger("authAccess"),t.transitionTo(get$(get$(e,"config"),"route"))}))}})),set$(get$(this,"auth"),"AuthRedirectable",get$(this,"AuthRedirectable"))}}));var get$=Ember.get,set$=Ember.set;set$(get$(get$(Em,"Auth"),"Module"),"EmberData",Ember.Object.extend({init:function(){return this.patch()},patch:function(){var e;e=this;if("undefined"!=typeof DS&&null!=DS&&null!=get$(DS,"RESTAdapter"))return get$(DS,"RESTAdapter").reopen({ajax:function(t,n,r){return r||(r={}),set$(r,"url",t),set$(r,"type",n),set$(r,"context",this),get$(get$(e,"auth"),"_request").send(r)}})}}));var get$=Ember.get,set$=Ember.set;set$(get$(get$(Em,"Auth"),"Module"),"EmberModel",Ember.Object.extend({init:function(){return this.patch()},patch:function(){var e;e=this;if(null!=Ember.RESTAdapter)return Ember.RESTAdapter.reopen({_ajax:function(t,n,r){var i;return i=this.ajaxSettings(t,r),new(get$(Ember.RSVP,"Promise"))(function(t,r){return n&&set$(i,"data",n),set$(i,"success",function(e){return Ember.run(null,t,e)}),set$(i,"error",function(e){return Ember.run(null,r,e)}),get$(get$(e,"auth"),"_request").send(i)})}})}}));var get$=Ember.get,set$=Ember.set;set$(get$(get$(Em,"Auth"),"Module"),"Epf",Ember.Object.extend({init:function(){return this.patch()},patch:function(){var e;e=this;if("undefined"!=typeof Ep&&null!=Ep&&null!=get$(Ep,"RestAdapter"))return get$(Ep,"RestAdapter").reopen({ajax:function(t,n,r){return r||(r={}),set$(r,"url",t),set$(r,"type",n),set$(r,"context",this),get$(get$(e,"auth"),"_request").send(r)}})}}));var get$=Ember.get,set$=Ember.set;set$(get$(get$(Em,"Auth"),"Module"),"Rememberable",Ember.Object.extend({init:function(){return null!=get$(this,"config")||set$(this,"config",get$(get$(this,"auth"),"rememberable")),this.patch()},syncEvent:function(e,t){t=2<=arguments.length?[].slice.call(arguments,1):[];switch(e){case"signInSuccess":return this.remember();case"signInError":return this.forget();case"signOutSuccess":return this.forget()}},recall:function(e){var t;return null==e&&(e={}),get$(this,"auth").wrapPromise((t=this,function(n,r){var i;return!get$(get$(t,"auth"),"signedIn")&&(i=t.retrieveToken())?(set$(t,"fromRecall",!0),e.data||(e.data={}),get$(e,"data")[get$(get$(t,"config"),"tokenKey")]=i,null!=get$(get$(t,"config"),"endPoint")?get$(t,"auth").signIn(get$(get$(t,"config"),"endPoint"),e).then(function(){return n()},function(){return n()}):get$(t,"auth").signIn(e).then(function(){return n()},function(){return n()})):n()}))},remember:function(){var e;return(e=null!=get$(get$(this,"auth"),"response")?get$(get$(this,"auth"),"response")[get$(get$(this,"config"),"tokenKey")]:void 0)?e!==this.retrieveToken()&&this.storeToken(e):get$(this,"fromRecall")||this.forget(),set$(this,"fromRecall",!1)},forget:function(){return this.removeToken()},retrieveToken:function(){return get$(get$(this,"auth"),"_session").retrieve("ember-auth-rememberable")},storeToken:function(e){return get$(get$(this,"auth"),"_session").store("ember-auth-rememberable",e,{expires:get$(get$(this,"config"),"period")})},removeToken:function(){return get$(get$(this,"auth"),"_session").remove("ember-auth-rememberable")},patch:function(){var e;return e=this,get$(Em,"Route").reopen({beforeModel:function(){return get$(e,"auth").followPromise(this._super.apply(this,arguments),function(){if(get$(get$(e,"config"),"autoRecall")&&!get$(get$(e,"auth"),"signedIn"))return e.recall()})}})}}));var get$=Ember.get,set$=Ember.set;set$(get$(get$(Em,"Auth"),"Module"),"Timeoutable",Ember.Object.extend({init:function(){var e;return null!=get$(this,"config")||set$(this,"config",get$(get$(this,"auth"),"timeoutable")),null!=get$(get$(this,"config"),"callback")||set$(get$(this,"config"),"callback",(e=this,function(){return get$(e,"auth").signOut()}))},syncEvent:function(e,t){t=2<=arguments.length?[].slice.call(arguments,1):[];switch(e){case"signInSuccess":return this.register();case"signInError":return this.clear();case"signOutSuccess":return this.clear()}},timeout:function(){var e;if(get$(this,"startTime")===null)return;e=get$(get$(this,"config"),"period")*60*1e3;if(get$(this,"startTime")-new Date<e)return;return get$(this,"config").callback()},register:function(){var e,t;return set$(this,"startTime",get$(get$(get$(this,"auth"),"_session"),"startTime")),e=get$(get$(this,"config"),"period")*60*1e3,setTimeout((t=this,function(){return t.timeout()}),e)},reset:function(){return this.register(),set$(this,"startTime",new Date)},clear:function(){return set$(this,"startTime",null)}})),function(e){typeof define=="function"&&define.amd?define(e):window.purl=e()}(function(){function s(e,n){var i=decodeURI(e),s=r[n||!1?"strict":"loose"].exec(i),o={attr:{},param:{},seg:{}},u=14;while(u--)o.attr[t[u]]=s[u]||"";return o.param.query=l(o.attr.query),o.param.fragment=l(o.attr.fragment),o.seg.path=o.attr.path.replace(/^\/+|\/+$/g,"").split("/"),o.seg.fragment=o.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),o.attr.base=o.attr.host?(o.attr.protocol?o.attr.protocol+"://"+o.attr.host:o.attr.host)+(o.attr.port?":"+o.attr.port:""):"",o}function o(t){var n=t.tagName;return typeof n!="undefined"?e[n.toLowerCase()]:n}function u(e,t){if(e[t].length===0)return e[t]={};var n={};for(var r in e[t])n[r]=e[t][r];return e[t]=n,n}function a(e,t,n,r){var s=e.shift();if(!s)d(t[n])?t[n].push(r):"object"==typeof t[n]?t[n]=r:"undefined"==typeof t[n]?t[n]=r:t[n]=[t[n],r];else{var o=t[n]=t[n]||[];"]"==s?d(o)?""!==r&&o.push(r):"object"==typeof o?o[v(o).length]=r:o=t[n]=[t[n],r]:~s.indexOf("]")?(s=s.substr(0,s.length-1),!i.test(s)&&d(o)&&(o=u(t,n)),a(e,o,s,r)):(!i.test(s)&&d(o)&&(o=u(t,n)),a(e,o,s,r))}}function f(e,t,n){if(~t.indexOf("]")){var r=t.split("[");a(r,e,"base",n)}else{if(!i.test(t)&&d(e.base)){var s={};for(var o in e.base)s[o]=e.base[o];e.base=s}t!==""&&c(e.base,t,n)}return e}function l(e){return p(String(e).split(/&|;/),function(e,t){try{t=decodeURIComponent(t.replace(/\+/g," "))}catch(n){}var r=t.indexOf("="),i=h(t),s=t.substr(0,i||r),o=t.substr(i||r,t.length);return o=o.substr(o.indexOf("=")+1,o.length),s===""&&(s=t,o=""),f(e,s,o)},{base:{}}).base}function c(e,t,n){var r=e[t];typeof r=="undefined"?e[t]=n:d(r)?r.push(n):e[t]=[r,n]}function h(e){var t=e.length,n,r;for(var i=0;i<t;++i){r=e[i],"]"==r&&(n=!1),"["==r&&(n=!0);if("="==r&&!n)return i}}function p(e,t){var n=0,r=e.length>>0,i=arguments[2];while(n<r)n in e&&(i=t.call(undefined,i,e[n],n,e)),++n;return i}function d(e){return Object.prototype.toString.call(e)==="[object Array]"}function v(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function m(e,t){return arguments.length===1&&e===!0&&(t=!0,e=undefined),t=t||!1,e=e||window.location.toString(),{data:s(e,t),attr:function(e){return e=n[e]||e,typeof e!="undefined"?this.data.attr[e]:this.data.attr},param:function(e){return typeof e!="undefined"?this.data.param.query[e]:this.data.param.query},fparam:function(e){return typeof e!="undefined"?this.data.param.fragment[e]:this.data.param.fragment},segment:function(e){return typeof e=="undefined"?this.data.seg.path:(e=e<0?this.data.seg.path.length+e:e-1,this.data.seg.path[e])},fsegment:function(e){return typeof e=="undefined"?this.data.seg.fragment:(e=e<0?this.data.seg.fragment.length+e:e-1,this.data.seg.fragment[e])}}}var e={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href",embed:"src",object:"data"},t=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],n={anchor:"fragment"},r={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},i=/^[0-9]+$/;return m.jQuery=function(e){e!=null&&(e.fn.url=function(t){var n="";return this.length&&(n=e(this).attr(o(this[0]))||""),m(n,t)},e.url=m)},m.jQuery(window.jQuery),m}),void function(){var e,t=Ember.get,n=Ember.set;e=jQuery,n(t(t(Em,"Auth"),"Module"),"UrlAuthenticatable",Ember.Object.extend({init:function(){return null!=t(this,"params")||n(this,"params",{}),null!=t(this,"config")||n(this,"config",t(t(this,"auth"),"urlAuthenticatable")),this.patch()},authenticate:function(r){var i;return null==r&&(r={}),t(this,"auth").wrapPromise((i=this,function(s,o){return t(t(i,"auth"),"signedIn")?s():(i.canonicalizeParams(),e.isEmptyObject(t(i,"params"))?s():(n(r,"data",e.extend(!0,t(i,"params"),t(r,"data")||{})),null!=t(t(i,"config"),"endPoint")?t(i,"auth").signIn(t(t(i,"config"),"endPoint"),r).then(function(){return s()},function(){return s()}):t(i,"auth").signIn(r).then(function(){return s()},function(){return s()})))}))},retrieveParams:function(){return n(this,"params",e.url().param(t(t(this,"config"),"paramsKey")))},canonicalizeParams:function(r){var i,s,o,u;null==r&&(r=t(this,"params")),o={};if(null==r)o={};else if(e.isArray(r))for(var a=0,f=r.length;a<f;++a)u=r[a],s=a,o[s]=u;else typeof r!="object"?o[String(r)]=String(r):o=r;i={};for(s in o)u=o[s],s=String(s),s&&s.charAt(t(s,"length")-1)==="/"&&(s=s.slice(0,-1)),typeof u=="object"?i[s]=this.canonicalizeParams(u):(u=String(u),u&&u.charAt(t(u,"length")-1)==="/"&&(u=u.slice(0,-1)),i[s]=u);return n(this,"params",i)},patch:function(){var e;return e=this,t(Em,"Route").reopen({beforeModel:function(){return t(e,"auth").followPromise(this._super.apply(this,arguments),function(){return e.authenticate()})}}),t(Em,"Router").reopen({init:function(){return e.retrieveParams(),this._super.apply(this,arguments)}})}}))}.call(this);